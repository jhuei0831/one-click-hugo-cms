---
title: Web Vulnerability Prevent
categories: ['CODE']
description: 弱點掃描、滲透測試或源碼檢測網路漏洞風險修補方法分享
tags: ['php', 'javascript', 'Vulnerability Assessment', 'Penetration Test', 'Source Code Analysis']
authors: ["Kerwin"]
featuredImagePreview: feature.jpg
date: 2022-04-30
lastmod: 2022-04-30
---

> 弱點掃描、滲透測試或源碼檢測網路漏洞風險修補方法分享
<!--more-->

## 前言

分享一些PHP或JS弱點掃描、滲透測試或源碼檢測遇到的風險處理方法。

---

## XSS


1. 8.1版前可以使用 [`filter_var($variable, FILTER_SANITIZE_STRING)`](https://www.php.net/manual/en/function.filter-var) ，但是`FILTER_SANITIZE_STRING`在PHP8.1版被棄用了。
2. 使用[`htmlspecialchars($variable, ENT_QUOTES)`](https://www.php.net/manual/en/function.htmlspecialchars)(使用ENT_QUOTES為雙引號與單引號都要轉換)。

{{< admonition type=info title="Info" open=true >}}
filter_var是直接把html的tag給去除掉，htmlspecialchars是把特殊字元轉換成編碼。
{{< /admonition >}}

---

## SQL Injection

1. 治本方法就是使用PDO。
2. 使用[`addslashes()`](https://www.php.net/manual/en/function.addslashes)可以解決大部分問題。

---

## Path Manipulation

使用[`realpath()`](https://www.php.net/manual/en/function.realpath)過濾掉`../`，使用[`basename()`](https://www.php.net/manual/en/function.basename)取得檔案名稱。

---

## Cross-Site Scripting: DOM


使用js將資料傳給物件時，不要使用`innerHTML`，使用`innerText`。

---

## Password Management: Hardcoded Password


不要將密碼直接打在程式碼上，可以使用[`dotenv`](https://github.com/vlucas/phpdotenv)

---

## Insecure Randomness

使用[`random_int()`](https://www.php.net/manual/en/function.random-int.php)，這個函數產生。

---